<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <title>
        Rust Collections - Joe
      </title>
    <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport"
    content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="renderer" content="webkit">
  <meta http-equiv="Cache-Control" content="no-transform" />
  <meta http-equiv="Cache-Control" content="no-siteapp" />
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="format-detection" content="telephone=no,email=no,adress=no">
  
  <meta name="theme-color" content="#000000" />
  
  <meta http-equiv="window-target" content="_top" />
  
  
  <meta name="description" content="Rustä¸­çš„é›†åˆç±»å‹ Rustçš„æ ‡å‡†åº“ä¸­æä¾›äº†å¸¸ç”¨çš„é›†åˆç±»å‹ï¼šVect(ç›¸å½“äºJavaä¸­çš„List)ï¼ŒMap(ç›¸å½“äºJavaä¸­çš„Map)ï¼Œåœ¨ä½¿" />
  <meta name="generator" content="Hugo 0.62.2 with theme pure" />
  <title>Rust Collections - Joe</title>
  
  
  <link rel="stylesheet" href="https://holicc.github.io/css/style.min.7dc20efbc53647d41aa9ddea0c48e59300223d084e66ea0cbe7c30bd88903acc.css">
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
  <link rel="manifest" href="/site.webmanifest">
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5">
  <meta name="msapplication-TileColor" content="#da532c">
  <meta name="theme-color" content="#ffffff">
  
  <link rel="stylesheet" href="https://cdn.staticfile.org/highlight.js/9.15.10/styles/github.min.css" async>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.css" async>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.css"
    integrity="sha384-bsHo4/LA+lkZv61JspMDQB9QP1TtO4IgOf2yYS+J6VdAYLVyx1c3XKcsHh0Vy8Ws" crossorigin="anonymous">
  <script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.js"
    integrity="sha384-4z8mjH4yIpuK9dIQGR1JwbrfYsStrNK6MP+2Enhue4eyo0XlBDXOIPc8b6ZU0ajz" crossorigin="anonymous"></script>
  <meta property="og:title" content="Rust Collections" />
<meta property="og:description" content="Rustä¸­çš„é›†åˆç±»å‹ Rustçš„æ ‡å‡†åº“ä¸­æä¾›äº†å¸¸ç”¨çš„é›†åˆç±»å‹ï¼šVect(ç›¸å½“äºJavaä¸­çš„List)ï¼ŒMap(ç›¸å½“äºJavaä¸­çš„Map)ï¼Œåœ¨ä½¿" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://holicc.github.io/2020/07/rust-collections/" />
<meta property="article:published_time" content="2020-07-15T00:00:00+00:00" />
<meta property="article:modified_time" content="2020-07-15T00:00:00+00:00" />
<meta itemprop="name" content="Rust Collections">
<meta itemprop="description" content="Rustä¸­çš„é›†åˆç±»å‹ Rustçš„æ ‡å‡†åº“ä¸­æä¾›äº†å¸¸ç”¨çš„é›†åˆç±»å‹ï¼šVect(ç›¸å½“äºJavaä¸­çš„List)ï¼ŒMap(ç›¸å½“äºJavaä¸­çš„Map)ï¼Œåœ¨ä½¿">
<meta itemprop="datePublished" content="2020-07-15T00:00:00&#43;00:00" />
<meta itemprop="dateModified" content="2020-07-15T00:00:00&#43;00:00" />
<meta itemprop="wordCount" content="1813">



<meta itemprop="keywords" content="programing,rust," /><meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Rust Collections"/>
<meta name="twitter:description" content="Rustä¸­çš„é›†åˆç±»å‹ Rustçš„æ ‡å‡†åº“ä¸­æä¾›äº†å¸¸ç”¨çš„é›†åˆç±»å‹ï¼šVect(ç›¸å½“äºJavaä¸­çš„List)ï¼ŒMap(ç›¸å½“äºJavaä¸­çš„Map)ï¼Œåœ¨ä½¿"/>

  <!--[if lte IE 9]>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/classlist/1.1.20170427/classList.min.js"></script>
    <![endif]-->

  <!--[if lt IE 9]>
      <script src="https://cdn.jsdelivr.net/npm/html5shiv@3.7.3/dist/html5shiv.min.js"></script>
      <script src="https://cdn.jsdelivr.net/npm/respond.js@1.4.2/dest/respond.min.js"></script>
    <![endif]-->

</head>
  </head>

  
  

  <body class="main-center theme-white" itemscope itemtype="http://schema.org/WebPage"><header class="header" itemscope itemtype="http://schema.org/WPHeader">
    <div class="slimContent">
      <div class="navbar-header">
        <div class="profile-block text-center">
          <a id="avatar" href="https://github.com/LuLongShan" target="_blank">
            <img class="img-circle img-rotate" src="https://holicc.github.io/avatar.png" width="200" height="200">
          </a>
          <h2 id="name" class="hidden-xs hidden-sm">Joe</h2>
          <h3 id="title" class="hidden-xs hidden-sm hidden-md">Hello World</h3>
          <small id="location" class="text-muted hidden-xs hidden-sm"><i class="icon icon-map-marker"></i>ChengDu, China</small>
        </div><div class="search" id="search-form-wrap">
    <form class="search-form sidebar-form">
        <div class="input-group">
            <input type="text" class="search-form-input form-control" placeholder="Search" />
            <span class="input-group-btn">
                <button type="submit" class="search-form-submit btn btn-flat" onclick="return false;"><i
                        class="icon icon-search"></i></button>
            </span>
        </div>
        <div class="ins-search">
            <div class="ins-search-mask"></div>
            <div class="ins-search-container">
                <div class="ins-input-wrapper">
                    <input type="text" class="ins-search-input" placeholder="Type something..."
                        x-webkit-speech />
                    <button type="button" class="close ins-close ins-selectable" data-dismiss="modal"
                        aria-label="Close"><span aria-hidden="true">Ã—</span></button>
                </div>
                <div class="ins-section-wrapper">
                    <div class="ins-section-container"></div>
                </div>
            </div>
        </div>
    </form>
</div>
        <button class="navbar-toggle collapsed" type="button" data-toggle="collapse" data-target="#main-navbar" aria-controls="main-navbar" aria-expanded="false">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <nav id="main-navbar" class="collapse navbar-collapse" itemscope itemtype="http://schema.org/SiteNavigationElement" role="navigation">
        <ul class="nav navbar-nav main-nav">
            <li class="menu-item menu-item-home">
                <a href="/">
                    <i class="icon icon-home-fill"></i>
                  <span class="menu-title">Home</span>
                </a>
            </li>
            <li class="menu-item menu-item-archives">
                <a href="/posts/">
                    <i class="icon icon-archives-fill"></i>
                  <span class="menu-title">Archives</span>
                </a>
            </li>
            <li class="menu-item menu-item-categories">
                <a href="/categories/">
                    <i class="icon icon-folder"></i>
                  <span class="menu-title">Categories</span>
                </a>
            </li>
            <li class="menu-item menu-item-tags">
                <a href="/tags/">
                    <i class="icon icon-tags"></i>
                  <span class="menu-title">Tags</span>
                </a>
            </li>
            <li class="menu-item menu-item-about">
                <a href="/about/">
                    <i class="icon icon-cup-fill"></i>
                  <span class="menu-title">About</span>
                </a>
            </li>
        </ul>
      </nav>
    </div>
  </header>

<aside class="sidebar" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    
      <div class="widget">
    <h3 class="widget-title"> Categories</h3>
    <div class="widget-body">
        <ul class="category-list">
            <li class="category-list-item"><a href="https://holicc.github.io/categories/mysql/" class="category-list-link">mysql</a><span class="category-list-count">1</span></li>
            <li class="category-list-item"><a href="https://holicc.github.io/categories/programing/" class="category-list-link">programing</a><span class="category-list-count">13</span></li>
            <li class="category-list-item"><a href="https://holicc.github.io/categories/protocol/" class="category-list-link">protocol</a><span class="category-list-count">1</span></li>
            <li class="category-list-item"><a href="https://holicc.github.io/categories/rocketmq/" class="category-list-link">rocketmq</a><span class="category-list-count">1</span></li>
        </ul>
    </div>
</div>
      <div class="widget">
    <h3 class="widget-title"> Tags</h3>
    <div class="widget-body">
        <ul class="tag-list">
            
            
            <li class="tag-list-item"><a href="https://holicc.github.io/tags/index/" class="tag-list-link">index</a><span
                    class="tag-list-count">1</span></li>
            
            
            <li class="tag-list-item"><a href="https://holicc.github.io/tags/mysql/" class="tag-list-link">mysql</a><span
                    class="tag-list-count">1</span></li>
            
            
            <li class="tag-list-item"><a href="https://holicc.github.io/tags/networking/" class="tag-list-link">networking</a><span
                    class="tag-list-count">1</span></li>
            
            
            <li class="tag-list-item"><a href="https://holicc.github.io/tags/programing/" class="tag-list-link">programing</a><span
                    class="tag-list-count">13</span></li>
            
            
            <li class="tag-list-item"><a href="https://holicc.github.io/tags/rocketmq/" class="tag-list-link">rocketmq</a><span
                    class="tag-list-count">1</span></li>
            
            
            <li class="tag-list-item"><a href="https://holicc.github.io/tags/rust/" class="tag-list-link">rust</a><span
                    class="tag-list-count">12</span></li>
            
            
            <li class="tag-list-item"><a href="https://holicc.github.io/tags/tcp/" class="tag-list-link">tcp</a><span
                    class="tag-list-count">1</span></li>
            
        </ul>

    </div>
</div>
      
<div class="widget">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget-body">
        <ul class="recent-post-list list-unstyled no-thumbnail">
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://holicc.github.io/2020/07/rust-testing/" class="title">Rust Testing</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2020-07-21 00:00:00 &#43;0000 UTC" itemprop="datePublished">2020-07-21</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://holicc.github.io/2020/07/rust-error/" class="title">Rust Error</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2020-07-17 00:00:00 &#43;0000 UTC" itemprop="datePublished">2020-07-17</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://holicc.github.io/2020/07/rust-collections/" class="title">Rust Collections</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2020-07-15 00:00:00 &#43;0000 UTC" itemprop="datePublished">2020-07-15</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://holicc.github.io/2020/07/rocketmq-overstock/" class="title">Rust Function</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2020-07-12 00:00:00 &#43;0000 UTC" itemprop="datePublished">2020-07-12</time>
                    </p>
                </div>
            </li>
            <li>
                <div class="item-inner">
                    <p class="item-title">
                        <a href="https://holicc.github.io/2020/07/rust-packages-management/" class="title">Rust Packages Management</a>
                    </p>
                    <p class="item-date">
                        <time datetime="2020-07-10 00:00:00 &#43;0000 UTC" itemprop="datePublished">2020-07-10</time>
                    </p>
                </div>
            </li>
        </ul>
    </div>
</div>
  </div>
</aside>

    
    
<aside class="sidebar sidebar-toc collapse" id="collapseToc" itemscope itemtype="http://schema.org/WPSideBar">
  <div class="slimContent">
    <h4 class="toc-title">Catalogue</h4>
    <nav id="toc" class="js-toc toc">

    </nav>
  </div>
</aside>
<main class="main" role="main"><div class="content">
  <article id="-" class="article article-type-" itemscope
    itemtype="http://schema.org/BlogPosting">
    
    <div class="article-header">
      <h1 itemprop="name">
  <a
    class="article-title"
    href="/2020/07/rust-collections/"
    >Rust Collections</a
  >
</h1>

      <div class="article-meta">
        
<span class="article-date">
  <i class="icon icon-calendar-check"></i>&nbsp;
<a href="https://holicc.github.io/2020/07/rust-collections/" class="article-date">
  <time datetime="2020-07-15 00:00:00 &#43;0000 UTC" itemprop="datePublished">2020-07-15</time>
</a>
</span>
<span class="article-category">
  <i class="icon icon-folder"></i>&nbsp;
  <a class="article-category-link" href="/categories/programing/"> programing </a>
</span>  
  <span class="article-tag">
    <i class="icon icon-tags"></i>&nbsp;
    <a class="article-tag-link" href="/tags/programing/"> programing </a>
    <a class="article-tag-link" href="/tags/rust/"> rust </a>
  </span>

        <span class="post-comment"><i class="icon icon-comment"></i>&nbsp;<a href="/2020/07/rust-collections/#comments"
            class="article-comment-link">Comments</a></span>
		<span class="post-wordcount hidden-xs" itemprop="wordCount">Word Count: 1813words</span>
		<span class="post-readcount hidden-xs" itemprop="timeRequired">Read Count: 4minutes </span>
      </div>
    </div>
    <div class="article-entry marked-body js-toc-content" itemprop="articleBody">
      <h3 id="rustä¸­çš„é›†åˆç±»å‹">Rustä¸­çš„é›†åˆç±»å‹</h3>

<p>Rustçš„æ ‡å‡†åº“ä¸­æä¾›äº†å¸¸ç”¨çš„é›†åˆç±»å‹ï¼š<code>Vect</code>(ç›¸å½“äºJavaä¸­çš„List)ï¼Œ<code>Map</code>(ç›¸å½“äºJavaä¸­çš„Map)ï¼Œåœ¨ä½¿ç”¨è¿™äº›é›†åˆçš„è¿‡ç¨‹ä¸­éœ€è¦æ³¨æ„çš„æ˜¯
<code>Ownership</code>å’Œ<code>let &amp; let mut</code>çš„ä¸€äº›æ³¨æ„äº‹é¡¹</p>

<p>ä½¿ç”¨<code>Vect</code>ç›´æ¥ä½¿ç”¨å‡½æ•°åˆ›å»ºæˆ–è€…ä½¿ç”¨å®</p>

<pre><code class="language-rust">let v: Vec&lt;i32&gt; = Vec::new();
//let c = Vec![1,2,3,4];
</code></pre>

<p>å¯ä»¥çœ‹åˆ°Vecæ˜¯ä¸€ä¸ªæ”¯æŒæ³›å‹çš„é›†åˆç±»å‹ï¼Œåœ¨åˆ›å»ºçš„æ—¶å€™éœ€è¦æŒ‡å®šå…¶å†…éƒ¨å…ƒç´ çš„å…·ä½“ç±»å‹ï¼›</p>

<p>ä½¿ç”¨<code>mut</code>å®šä¹‰Vectorå°±å¯ä»¥å¯¹å®ƒè¿›è¡Œä¿®æ”¹</p>

<pre><code class="language-rust"> let mut v = Vec::new();

 v.push(5);
 v.push(6);
 v.push(7);
 v.push(8);
</code></pre>

<p>å½“ç„¶äº†æ ¹æ®ä»»ä½•å˜é‡éƒ½æœ‰å…¶ä½œç”¨åŸŸï¼ˆScopeï¼‰å¦‚æœä¸åœ¨ä½œç”¨åŸŸä¸­äº†å°±ä¼šè¢«é‡Šæ”¾æ‰ï¼Œå¹¶ä¸”Vectorä¸­çš„å…ƒç´ ä¹Ÿä¼šç›¸åº”çš„è¢«é‡Šæ”¾æ‰</p>

<pre><code class="language-rust">{
        let v = vec![1, 2, 3, 4];

        // do stuff with v
} // &lt;- v goes out of scope and is freed here
</code></pre>

<p>rustä¸­è®¿é—®Vectorå…ƒç´ æœ‰ä¸¤ç§æ–¹æ³•ä¸€ç§æ˜¯ä½¿ç”¨ä¸‹æ ‡è®¿é—®ä¸€ç§æ˜¯ä½¿ç”¨getæ–¹æ³•ï¼š</p>

<pre><code class="language-rust">fn main() {
    let v = vec![1, 2, 3, 4, 5];

    let third: &amp;i32 = &amp;v[2];
    println!(&quot;The third element is {}&quot;, third);

    match v.get(2) {
        Some(third) =&gt; println!(&quot;The third element is {}&quot;, third),
        None =&gt; println!(&quot;There is no third element.&quot;),
    }
}
</code></pre>

<p>åŒºåˆ«åœ¨äºgetæ–¹æ³•æ˜¯ç©ºå®‰å…¨çš„ï¼Œè¿”å›çš„æ˜¯ä¸€ä¸ª<code>Option&lt;&amp;T&gt;</code>ç±»å‹ï¼Œå°±æ˜¯è¯´å¦‚æœgetçš„ä¸€ä¸ªä¸å­˜åœ¨vectorä¸­çš„å…ƒç´ åªä¼šè¿”å›ä¸€ä¸ª<code>Option&lt;None&gt;</code>,è€Œä½¿ç”¨<br>
<code>&amp;[]</code>ä¸‹æ ‡è®¿é—®ä¼španicï¼Œå› ä¸ºä½ è®¿é—®äº†ä¸€ä¸ªä¸å­˜åœ¨çš„å…ƒç´ ï¼›</p>

<pre><code class="language-rust">fn main() {
    let mut v = vec![1, 2, 3, 4, 5];

    let first = &amp;v[0];

    v.push(6);

    println!(&quot;The first element is: {}&quot;, first);
}
</code></pre>

<p>ä¸ºä»€ä¹ˆä»¥ä¸Šä»£ç æ— æ³•ç¼–è¯‘é€šè¿‡ï¼Œå¯ä»¥è¯´æ˜¯å……æ»¡äº†Rustçš„å“²å­¦ğŸ˜‚</p>

<blockquote>
<p>This error is due to the way vectors work: adding a new element onto the end of the vector might require allocating new memory and copying the old elements to the new space, if there isnâ€™t enough room to put all the elements next to each other where the vector currently is. In that case, the reference to the first element would be pointing to deallocated memory. The borrowing rules prevent programs from ending up in that situation.</p>
</blockquote>

<p>å®˜æ–¹è§£é‡Šè¯´è¿™è·ŸVectorçš„å®ç°æœºåˆ¶æœ‰å…³ï¼Œåœ¨å¾€Vectorä¸­æ·»åŠ æ–°çš„å…ƒç´ çš„æ—¶å€™å¯èƒ½ä¼šå› ä¸ºåŸå§‹ç©ºé—´ä¸å¤Ÿå®¹çº³è¿™ä¹ˆå¤šå…ƒç´ è€Œå¯¼è‡´å°†åŸæ¥çš„å…ƒç´ éƒ½æ‹·è´åˆ°ä¸€ä¸ªæ–°çš„åœ°æ–¹ï¼Œä»è€Œæ”¹å˜äº†å†…éƒ¨å…ƒç´ çš„æŒ‡é’ˆï¼Œå¦‚æœè¿™æ—¶æœ‰ä¸€ä¸ªå¤–éƒ¨å€Ÿç”¨çš„æŒ‡é’ˆè¿˜åœç•™åœ¨åŸå§‹çš„æœªçŸ¥å°±ä¼šé€ æˆå†…å­˜è®¿é—®ä¸æ­£ç¡®çš„é—®é¢˜ã€‚</p>

<p>è¿­ä»£æ–¹å¼</p>

<pre><code class="language-rust">fn main() {
    let v = vec![100, 32, 57];
    for i in &amp;v {
        println!(&quot;{}&quot;, i);
    }
    for i in &amp;mut v {
        *i += 50; //* è¡¨ç¤ºè§£å¼•ç”¨
    }
}
</code></pre>

<p>å®˜æ–¹æ–‡æ¡£ä¹Ÿè®²äº†ä¸€äº›Vectorçš„ä¸€äº›æŠ€å·§</p>

<pre><code class="language-rust">fn main() {
    enum SpreadsheetCell {
        Int(i32),
        Float(f64),
        Text(String),
    }

    let row = vec![
        SpreadsheetCell::Int(3),
        SpreadsheetCell::Text(String::from(&quot;blue&quot;)),
        SpreadsheetCell::Float(10.12),
    ];
}
</code></pre>

<p>åœ¨Rustä¸­Stringä¹Ÿä½¿ç”¨é›†åˆç±»å‹å®ç°çš„ï¼Œåº•å±‚å°±æ˜¯ä¸€ä¸ªbytesé›†åˆï¼Œæ‰€ä»¥å®˜æ–¹ä¹Ÿæ”¾åˆ°äº†è¿™ä¸€ç« èŠ‚æ¥è®²ã€‚</p>

<pre><code class="language-rust">fn main() {
    let mut s = String::from(&quot;foo&quot;);
    s.push_str(&quot;bar&quot;);
}
</code></pre>

<p>å¯¹äºå¦‚ä½•åœ¨Stringä¸­ä½¿ç”¨<code>+</code>ï¼Œè¿™ä¹Ÿæ˜¯ä¸€é—¨å­¦é—®</p>

<blockquote>
<p>This isnâ€™t the exact signature thatâ€™s in the standard library: in the standard library, add is defined using generics. Here, weâ€™re looking at the signature of add with concrete types substituted for the generic ones, which is what happens when we call this method with String values. Weâ€™ll discuss generics in Chapter 10. This signature gives us the clues we need to understand the tricky bits of the + operator.</p>

<p>First, s2 has an &amp;, meaning that weâ€™re adding a reference of the second string to the first string because of the s parameter in the add function: we can only add a &amp;str to a String; we canâ€™t add two String values together. But waitâ€”the type of &amp;s2 is &amp;String, not &amp;str, as specified in the second parameter to add. So why does Listing 8-18 compile?</p>

<p>The reason weâ€™re able to use &amp;s2 in the call to add is that the compiler can coerce the &amp;String argument into a &amp;str. When we call the add method, Rust uses a deref coercion, which here turns &amp;s2 into &amp;s2[..]. Weâ€™ll discuss deref coercion in more depth in Chapter 15. Because add does not take ownership of the s parameter, s2 will still be a valid String after this operation.</p>

<p>Second, we can see in the signature that add takes ownership of self, because self does not have an &amp;. This means s1 in Listing 8-18 will be moved into the add call and no longer be valid after that. So although let s3 = s1 +  looks like it will copy both strings and create a new one, this statement actually takes ownership of s1, appends a copy of the contents of s2, and then returns ownership of the result. In other words, it looks like itâ€™s making a lot of copies but isnâ€™t; the implementation is more efficient than copying.</p>
</blockquote>

<p>å®˜æ–¹ç”¨äº†å¾ˆé•¿ä¸€æ®µæ¥è¯´æ˜å¦‚ä½•å¯¹Stringç±»å‹æ¥ä½¿ç”¨<code>+</code>å·ï¼Œæ€»ç»“ä¸€ä¸‹å°±æ˜¯<code>+</code>å…¶å®æ˜¯å°±æ˜¯Stringçš„addæ–¹æ³•</p>

<p>çœ‹ä¸€ä¸‹æ–¹æ³•ç­¾å</p>

<pre><code class="language-rust">fn add(self, s: &amp;str) -&gt; String 
</code></pre>

<p>æ¥å—çš„å¯¹è±¡æ˜¯ä¸€ä¸ª<code>&amp;str</code>,æ‰€ä»¥åœ¨ä½¿ç”¨çš„æ—¶å€™å¯ä»¥æ˜¯</p>

<pre><code class="language-rust">let a = String::from(&quot;test&quot;);
let b = a + &quot;zxc&quot;;
</code></pre>

<p>ä¹Ÿå¯ä»¥æ˜¯</p>

<pre><code class="language-rust">let a = String::from(&quot;test&quot;);
let b = String::from(&quot;hello&quot;);
let c = a + &amp;b
</code></pre>

<p>è¿™é‡Œçš„<code>&amp;b</code>æ˜¯ä¸€ä¸ª<code>&amp;String</code>ä¼šè¢«å¼ºè½¬ä¸ºä¸€ä¸ª <code>&amp;str</code>ç±»å‹ã€‚</p>

<p>Stringç±»å‹ä¹Ÿä¸æ”¯æŒä¸‹æ ‡è®¿é—®ï¼Œï¼ˆå¯¹Javaç¨‹åºå‘˜æ¥è¯´å¾ˆOKï¼‰</p>

<p>æœ€åå®˜æ–¹è¯´äº†ä¸€å¥è®©äººæ— è¯­çš„è¯</p>

<blockquote>
<p>To summarize, strings are complicated. Different programming languages make different choices about how to present this complexity to the programmer. Rust has chosen to make the correct handling of String data the default behavior for all Rust programs, which means programmers have to put more thought into handling UTF-8 data upfront. This trade-off exposes more of the complexity of strings than is apparent in other programming languages, but it prevents you from having to handle errors involving non-ASCII characters later in your development life cycle.</p>
</blockquote>

<p>å¥½å§ï¼Œä¸‹ä¸€ä¸ªæ˜¯HashMap</p>

<pre><code class="language-rust">fn main() {
    use std::collections::HashMap;

    let mut scores = HashMap::new();

    scores.insert(String::from(&quot;Blue&quot;), 10);
    scores.insert(String::from(&quot;Yellow&quot;), 50);
}
</code></pre>

<p>å¯¹äºéæ‹·è´çš„å€¼ä¾‹å¦‚Stringç±»å‹ï¼Œå¦‚æœæŠŠå€¼insertåˆ°mapä¸­å°±æ˜¯å¯¹è¿™ä¸ªå€¼æ‰€æœ‰æƒçš„è½¬ç§»åˆ°mapä¸­äº†ï¼›</p>

<pre><code class="language-rust">fn main() {
    use std::collections::HashMap;

    let field_name = String::from(&quot;Favorite color&quot;);
    let field_value = String::from(&quot;Blue&quot;);

    let mut map = HashMap::new();
    map.insert(field_name, field_value);
    // field_name and field_value are invalid at this point, try using them and
    // see what compiler error you get!
}
</code></pre>

<p>å¦‚ä½•è¿­ä»£ï¼Œå¾ˆå¥½ç†è§£</p>

<pre><code class="language-rust">fn main() {
    use std::collections::HashMap;

    let mut scores = HashMap::new();

    scores.insert(String::from(&quot;Blue&quot;), 10);
    scores.insert(String::from(&quot;Yellow&quot;), 50);

    for (key, value) in &amp;scores {
        println!(&quot;{}: {}&quot;, key, value);
    }
}
</code></pre>

<p>ä¸€äº›apiä»‹ç»</p>

<pre><code class="language-rust">fn main() {
    use std::collections::HashMap;

    let mut scores = HashMap::new();
    scores.insert(String::from(&quot;Blue&quot;), 10);

    scores.entry(String::from(&quot;Yellow&quot;)).or_insert(50);
    scores.entry(String::from(&quot;Blue&quot;)).or_insert(50);

    println!(&quot;{:?}&quot;, scores);
}
</code></pre>

<p>ç›¸å½“äºJavaä¸­çš„<code>map.putIfAbsent</code></p>

<p>å…¶ä»–çš„å°±ä¸èµ˜è¿°äº†ï¼Œå°±æ˜¯äº†è§£ä¸€ä¸‹Rustä¸­çš„é›†åˆ</p>

<p>å®Œï¼</p>

    </div>
    <div class="article-footer">
<blockquote class="mt-2x">
  <ul class="post-copyright list-unstyled">
    <li class="post-copyright-link hidden-xs">
      <strong>Permalink: </strong>
      <a href="https://holicc.github.io/2020/07/rust-collections/" title="Rust Collections" target="_blank" rel="external">https://holicc.github.io/2020/07/rust-collections/</a>
    </li>
    <li class="post-copyright-license">
      <strong>Licenseï¼š</strong><a href="http://creativecommons.org/licenses/by/4.0/deed.zh" target="_blank" rel="external">CC BY 4.0 CN</a>
    </li>
  </ul>
</blockquote>

<div class="panel panel-default panel-badger">
  <div class="panel-body">
    <figure class="media">
      <div class="media-left">
        <a href="https://github.com/LuLongShan" target="_blank" class="img-burn thumb-sm visible-lg">
          <img src="https://holicc.github.io/avatar.png" class="img-rounded w-full" alt="">
        </a>
      </div>
      <div class="media-body">
        <h3 class="media-heading"><a href="https://github.com/LuLongShan" target="_blank"><span class="text-dark">Joe</span><small class="ml-1x">Hello World</small></a></h3>
        <div>people are resources</div>
      </div>
    </figure>
  </div>
</div>
    </div>
  </article>
<section id="comments">
    <div id="disqus_thread">
        <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
    </div>
</section>

</div><nav class="bar bar-footer clearfix" data-stick-bottom>
    <div class="bar-inner">
        <ul class="pager pull-left">
            <li class="prev">
                <a href="https://holicc.github.io/2020/07/rocketmq-overstock/" title="Rust Function"><i
                        class="icon icon-angle-left"
                        aria-hidden="true"></i><span>&nbsp;&nbsp;Older</span></a>
            </li>
            <li class="next">
                <a href="https://holicc.github.io/2020/07/rust-error/"
                    title="Rust Error"><span>Newer&nbsp;&nbsp;</span><i
                        class="icon icon-angle-right" aria-hidden="true"></i></a>
            </li>
            
            <li class="toggle-toc">
                <a class="toggle-btn collapsed" data-toggle="collapse" href="#collapseToc" aria-expanded="false"
                    title="Catalogue" role="button">
                    <span>[&nbsp;</span><span>Catalogue</span>
                    <i class="text-collapsed icon icon-anchor"></i>
                    <i class="text-in icon icon-close"></i>
                    <span>]</span>
                </a>
            </li>
        </ul>
        <div class="bar-right">
            <div class="share-component" data-sites="weibo,qq,wechat,facebook,twitter"
                data-mobile-sites="weibo,qq,qzone"></div>
        </div>
    </div>
</nav>

</main><footer class="footer" itemscope itemtype="http://schema.org/WPFooter">
<ul class="social-links">
    <li><a href="https://github.com/LuLongShan" target="_blank" title="github" data-toggle=tooltip data-placement=top >
            <i class="icon icon-github"></i></a></li>
    <li><a href="https://holicc.github.io/index.xml" target="_blank" title="rss" data-toggle=tooltip data-placement=top >
            <i class="icon icon-rss"></i></a></li>
</ul>
  <div class="copyright">
    &copy;2017  -
    2020
    <div class="publishby">
        Theme by <a href="https://github.com/xiaoheiAh" target="_blank"> xiaoheiAh </a>base on<a href="https://github.com/xiaoheiAh/hugo-theme-pure" target="_blank"> pure</a>.
    </div>
  </div>
</footer>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_SVG"></script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
            showMathMenu: false, //disables context menu
            tex2jax: {
            inlineMath: [ ['$','$'], ['\\(','\\)'] ]
           }
    });
</script>

<script src="https://cdn.jsdelivr.net/npm/jquery@3.4.1/dist/jquery.min.js"></script>
<script>
    window.jQuery || document.write('<script src="js/jquery.min.js"><\/script>')
</script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/highlight.min.js"></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/python.min.js" defer></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/javascript.min.js" defer></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/java.min.js" defer></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/go.min.js" defer></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/sql.min.js" defer></script>
<script type="text/javascript" src="https://cdn.staticfile.org/highlight.js/9.15.10/languages/rust.min.js" defer></script><script>
    hljs.configure({
        tabReplace: '    ', 
        classPrefix: ''     
        
    })
    hljs.initHighlightingOnLoad();
</script>
<script src="https://holicc.github.io/js/application.min.bdeb64b910570b6c41badc6a05b7afb0c8ad9efd8525de3c7257d59e786326a3.js"></script>
<script src="https://holicc.github.io/js/plugin.min.51ff8c7317566f82259170fa36e09c4493adc9b9378b427a01ad3f017ebac7dd.js"></script>

<script>
    (function (window) {
        var INSIGHT_CONFIG = {
            TRANSLATION: {
                POSTS: 'Posts',
                PAGES: 'Pages',
                CATEGORIES: 'Categories',
                TAGS: 'Tags',
                UNTITLED: '(Untitled)',
            },
            ROOT_URL: 'https:\/\/holicc.github.io\/',
            CONTENT_URL: 'https:\/\/holicc.github.io\/\/searchindex.json ',
        };
        window.INSIGHT_CONFIG = INSIGHT_CONFIG;
    })(window);
</script>
<script type="text/javascript" src="https://holicc.github.io/js/insight.min.a343cd9a5a7698336b28ef3a7c16a3a1b1d2d5fb17dc8ed04022bbe08cc5459073a15bdafa3a8a58cdd56080784bdd69fa70b1ae8597565c799c57ed00f0e120.js" defer></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tocbot/4.4.2/tocbot.min.js"></script>
<script>
    tocbot.init({
        
        tocSelector: '.js-toc',
        
        contentSelector: '.js-toc-content',
        
        headingSelector: 'h1, h2, h3',
        
        hasInnerContainers: true,
    });
</script>

<script>
    var disqus_config = function () {
        this.page.url = 'https:\/\/holicc.github.io\/2020\/07\/rust-collections\/';
        this.page.identifier = 'takijoe';
    };
    (function () {
        var d = document, s = d.createElement('script');
        s.src = '//' + 'takijoe' + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>

<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-157580785-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>

  </body>
</html>
