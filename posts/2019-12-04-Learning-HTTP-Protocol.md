### TCP连接相关

 - *并行连接*：会消耗更多的资源（比如内存），也会受到带宽的限制，打开连接数量有限，会受到TCP慢启动和拥塞适应的影响。**所以也不一定快**。用户体验上会感觉快了。
 - *持久连接*：在一个HTTP事务完成之后不关闭连接，直到服务器或客户端通知关闭连接，可以避免TCP慢启动，进入已调协状态，提高传输效率。HTTP/1.0 使用的是 **Connection：keep-alive**关键字进行标记是否保持连接，默认是关闭的。HTTP/1.1 默认开启了持久连接，如果在首部没法标记：**Connection：close**就默认为开启持久连接。
 - *代理对于HTTP报文的某些字段并不会转发（比如Connection字段等）*
 - *管道化连接*：在HTTP/1.1的持久连接的基础上开通管道，将多条请求窜行发送。必须保证有序的应答，失败重试机制可能无法适用于POST这样的非幂等请求。
 - *TCP是双向连接（输入和输出），当输入端被关闭然而数据并没有传输完，就会受到操作系统的异常提示“连接已经被充值”（难怪之前做DHT的时候老是遇到这个reset exception)* 关闭输入通道比较危险，关闭输出相对安全

### 代理

 - *连接两个或多个使用相同协议的应用程序*
 - *通过代理起到流量监控、访问控制、缓存、服务器加速（反向代理）*
 - *通过将代理服务器部署在网络结构中的不同位置来实现不同的功能* （可以自己实现流量监控或者匿名功能？）

#### 如何让流量流向代理服务器？（基于如何获取HTTP的流量信息）

  - 修改客户端
  - **修改网络** （很黑客）
  - **修改DNS的命名空间** （很黑客）
  - 修改Web服务器

### HTTP/1.1存在的问题

 - *复杂性，实现难度较大*
 - *可拓展性，协议拓展没有兼容性*
 - *性能*
 - *传输协议的依赖，依赖于TCP/IP网络协议栈*

为了解决以上的问题，成了1997年HTTP-NG组，然而在一年之后就解散了（由于当时HTTP/1.1还没有普及，所以暂时停止了重构HTTP协议，再后来HTTP/2.0就来了）

### 如何保存用户状态

周所周知HTTP是无状态的，那么早期的大佬们是如何保存用户的状态的呢？

 - *胖URL*：通过将用户登录后生产的为ID带到每一个URL中标示用户。然而这个方法问题多到💥。
 - *Cookie技术*：由网景公司开发的技术，一致沿用至今。Cookie的基本思想是让浏览器累积一组服务器特有的的信息，每次都将这些信息带上访问服务器。Cookie有两个版本：0和1。现在大规模使用的都是由网景公司制定的版本0（因为1版本太复杂了吧）
 


### 问题

 1. 什么是幂等？（答：如果一个事务，不管执行多少次结果都是相等的，这个事务就是幂等的。）
 2. 什么是事务？（答：HTTP中指的是一次HTTP请求的完整流程。）

### 总结

  阅读完《HTTP权威指南》，共耗时5～6个小时，该书是基于HTTP/1.1版本进行讲解的（现在已经有HTTP/2.0版本）很多已经过时或者内容与HTTP没有太多关联的章节都跳过了。这个书是一个HTTP协议的大致介绍，讲解的内容不是很细，还有很多内容都是过时的内容（毕竟出版比较久了）。由于内容比较简单笔记也做的不多。总的来说让我对HTTP协议有了基本的认识和了解，了解了HTTP协议的一个进化过程，通过从HTTP/0.9到HTTP/1.1的这个过程遇到很多web开发中比较常见的问题（比如代理、缓存、DNS解析、认证机制等）。也引出了TCP/IP的重要性，毕竟HTTP是属于应用层的协议，涉及到的内容不会太过于复杂，对于TCP、IP这样的协议属于传输层更加靠近底层会复杂许多。